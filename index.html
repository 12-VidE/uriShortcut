<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<style>
		.center {
			display: flex;
			justify-content: center;
			align-items: center;
		  	height: 95vh;
		}
		
		.top_title {
			display: flex;
			justify-content: center;
			align-items: top;
		  	height: 5vh;
			color: rgb(99, 102, 106);
			font-size: 2vw;
		}
		
		.bottom_title {
			display: flex;
			justify-content: center;
			align-items: bottom;
		  	height: 5vh;
			color: rgb(99, 102, 106);
			font-size: 2vw;
		}
		
		
		body {
			background-color: black;
		  	color: white;
		  	font-size: 20px;
		  	text-align: center;
		}

		input[type=text] {
			padding: 16px 27px;
		  	margin: 11px 0;
		  	box-sizing: border-box;
		  	border-radius: 14px;
		  	border-color: white;
		  	background-color: black;
		  	color: white;
			font-size: 5vw;
  			width: 80%;
		}

		button {
		 	background-color: white;
		  	color: black;
		  	padding: 19px 27px;
		  	margin: 11px 0;
		  	border-radius: 14px;
		  	border-color: white;
		  	cursor: pointer;
			font-size: 4vm;
			width: 15%;
		}
	</style>
	<title>uriShortcut</title>
</head>

<body>
	<div class="top_title">
  		<h2>uriShortcut</h2>
	</div>
	<div class="center">
		<input type="text" id="uri-input" />
	  	<button onclick="goToUri()">Ok</button>
	</div>
	
	<div style="height:auto;">
  		<h1>Instructions (Android)</h1>
  		<ol>
			<li>Write a URI </li>
			<li>Press <button disabled style="padding: 8px 12px;">Ok</button> â†’ The URL will change</li>
			<li>Add this page to the Home-Screen by tapping on the 
				<svg style="color: white" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16"> <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" fill="white"></path> </svg> 
				on the top-right
			</li>
		</ol>
		<p>Any time you open that shorcut, the URI nested in the URL will be followed (the browser may ask for some extra permission)<p>
		<div style="text-align:left;">
			<h4>Example</h4>
			<ul>
				<li><b><a href="https://help.obsidian.md/Advanced+topics/Using+Obsidian+URI">Obsidian</a>:</b> Use "obsidian://open?vault=my%20vault" to open your vault named "my vault" (formatted using %2F)
				</li>
			</ul>
		</div>
	</div>
	<div class="bottom_title">
		<h4>Made by  <i>VidE</i></h2>
	</div>
</body>

<script>
	let newPage = true;
	function goToUri() {
		const uri = document.getElementById("uri-input").value;
		const url = new URL(window.location.href);
		url.searchParams.set("uri", uri);
		if (isValidUrl(uri)){
			newPage = false;
			window.location.href = url.toString();
		}
		else
			alert("Invalid URL");
     }
    
	function isValidUrl(url) {
		const regex = /:\/\/[^ "]+/;
		return regex.test(url);
    }

    if (window.location.search.includes("uri") && newPage==true) {
		const url = new URL(window.location.href);
		const uri = url.searchParams.get("uri");
		window.open(uri);
	    	window.close(``, `_parent`, ``);
    }
</script>
</html>
